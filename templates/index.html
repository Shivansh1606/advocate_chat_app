{% extends "base.html" %}

{% block title %}Select Advocate - Legal Chat{% endblock %}

{% block content %}
<div class="main-container">
    <div class="header">
        <h1><i class="fas fa-gavel"></i> EaseLaw Chat System</h1>
        <p>Connect with experienced advocates for legal consultation</p>
    </div>

    <div class="client-form">
        <div class="form-group">
            <label for="client-name">Your Name</label>
            <input type="text" id="client-name" placeholder="Enter your full name" required>
        </div>
    </div>

    <div class="advocates-grid">
        <h2>Select an Advocate by Specialty</h2>
        <div class="grid">
            {% for advocate in advocates %}
            <div class="advocate-card" data-advocate-id="{{ advocate.id }}">
                <div class="advocate-header">
                    <div class="advocate-avatar">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="status-indicator {% if advocate.available %}online{% else %}offline{% endif %}"></div>
                </div>
                <div class="advocate-info">
                    <h3>{{ advocate.name }}</h3>
                    <p class="specialty">{{ advocate.specialty }}</p>
                    <p class="experience">{{ advocate.experience }} experience</p>
                    <div class="rating">
                        <i class="fas fa-star"></i>
                        <span>{{ advocate.rating }}</span>
                    </div>
                </div>
                <button class="chat-btn" onclick="startChat('{{ advocate.id }}')">
                    <i class="fas fa-comments"></i> Start Chat
                </button>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function startChat(advocateId) {
    const clientName = document.getElementById('client-name').value.trim();
    
    if (!clientName) {
        alert('Please enter your name first');
        return;
    }
    
    window.location.href = `/chat/${advocateId}?client_name=${encodeURIComponent(clientName)}`;
}
</script>
{% endblock %}
